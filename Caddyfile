{
    auto_https off
    admin off
    persist_config off
}

# Health check endpoint for Railway
respond /health 200

encode gzip

root * /app/.web

file_server

reverse_proxy /backend/* localhost:8000
reverse_proxy localhost:8000

# SPA fallback: fixes fileserver.notFound and refresh/deep link 404s
handle_path /* {
    try_files {path} {path}/ /index.html
}
