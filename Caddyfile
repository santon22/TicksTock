{
    # Disable automatic HTTPS â€” Railway handles TLS termination for *.up.railway.app domains
    auto_https on
}

{$RAILWAY_PUBLIC_DOMAIN:localhost:3000}

encode gzip

root * /app/.web

file_server

reverse_proxy /backend/* localhost:8000
reverse_proxy localhost:8000

# SPA fallback for client-side routing (fixes refresh/deep link 404s)
@spa {
    not path /backend/* /_static/*
    not file
}
rewrite @spa /index.html
